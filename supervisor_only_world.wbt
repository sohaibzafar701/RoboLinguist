#VRML_SIM R2023b utf8

EXTERNPROTO "https://raw.githubusercontent.com/cyberbotics/webots/R2023b/projects/objects/backgrounds/protos/TexturedBackground.proto"
EXTERNPROTO "https://raw.githubusercontent.com/cyberbotics/webots/R2023b/projects/objects/backgrounds/protos/TexturedBackgroundLight.proto"
EXTERNPROTO "https://raw.githubusercontent.com/cyberbotics/webots/R2023b/projects/objects/floors/protos/RectangleArena.proto"
EXTERNPROTO "https://raw.githubusercontent.com/cyberbotics/webots/R2023b/projects/robots/gctronic/e-puck/protos/E-puck.proto"
EXTERNPROTO "https://raw.githubusercontent.com/cyberbotics/webots/R2023b/projects/objects/factory/containers/protos/WoodenBox.proto"

WorldInfo {
  info [
    "ChatGPT for Robots - Supervisor Only Control"
    "Only the supervisor has external controller"
  ]
  title "Supervisor Only Fleet Control"
  basicTimeStep 16
}

Viewpoint {
  orientation -0.5773502691896258 0.5773502691896258 0.5773502691896258 2.0944
  position 0 0 8
  follow "robot_0"
}

TexturedBackground {
}

TexturedBackgroundLight {
}

# Smaller arena for better visibility
RectangleArena {
  translation 0 0 0
  floorSize 12 12
  floorTileSize 1 1
  wallHeight 1
  wallAppearance PBRAppearance {
    baseColor 0.8 0.8 0.8
    roughness 0.5
    metalness 0.1
  }
}

# Warehouse shelves/obstacles
WoodenBox {
  translation -6 -6 0.5
  size 2 1 1
  name "shelf_1"
}

WoodenBox {
  translation -6 0 0.5
  size 2 1 1
  name "shelf_2"
}

WoodenBox {
  translation -6 6 0.5
  size 2 1 1
  name "shelf_3"
}

WoodenBox {
  translation 0 -6 0.5
  size 2 1 1
  name "shelf_4"
}

WoodenBox {
  translation 0 6 0.5
  size 2 1 1
  name "shelf_5"
}

WoodenBox {
  translation 6 -6 0.5
  size 2 1 1
  name "shelf_6"
}

WoodenBox {
  translation 6 0 0.5
  size 2 1 1
  name "shelf_7"
}

WoodenBox {
  translation 6 6 0.5
  size 2 1 1
  name "shelf_8"
}

# Fleet of 10 robots - NO CONTROLLERS (supervisor will control them)
DEF robot_0 E-puck {
  translation -4 -3 0
  rotation 0 0 1 0
  name "robot_0"
  customData "0"
}

DEF robot_1 E-puck {
  translation -3 -3 0
  rotation 0 0 1 0
  name "robot_1"
  customData "1"
}

DEF robot_2 E-puck {
  translation -2 -3 0
  rotation 0 0 1 0
  name "robot_2"
  customData "2"
}

DEF robot_3 E-puck {
  translation -1 -3 0
  rotation 0 0 1 0
  name "robot_3"
  customData "3"
}

DEF robot_4 E-puck {
  translation 0 -3 0
  rotation 0 0 1 0
  name "robot_4"
  customData "4"
}

DEF robot_5 E-puck {
  translation 1 -3 0
  rotation 0 0 1 0
  name "robot_5"
  customData "5"
}

DEF robot_6 E-puck {
  translation 2 -3 0
  rotation 0 0 1 0
  name "robot_6"
  customData "6"
}

DEF robot_7 E-puck {
  translation 3 -3 0
  rotation 0 0 1 0
  name "robot_7"
  customData "7"
}

DEF robot_8 E-puck {
  translation 4 -3 0
  rotation 0 0 1 0
  name "robot_8"
  customData "8"
}

DEF robot_9 E-puck {
  translation 0 3 0
  rotation 0 0 1 0
  name "robot_9"
  customData "9"
}

# Supervisor robot - ONLY external controller in the world
Robot {
  translation 0 0 2
  children [
    Shape {
      appearance PBRAppearance {
        baseColor 0 1 0
        transparency 0.8
      }
      geometry Sphere {
        radius 0.1
      }
    }
  ]
  name "fleet_supervisor"
  controller "<extern>"
  supervisor TRUE
}